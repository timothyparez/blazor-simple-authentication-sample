@page "/authentication/{action}"
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@inject AuthenticationStateProvider AuthenticationService

@* <RemoteAuthenticatorView Action="@Action" /> *@

@code{
    [Parameter] public string? Action { get; set; }

        protected override Task OnInitializedAsync()
        {
            Console.WriteLine("InitializedAsync");
            return base.OnInitializedAsync();
        }

        protected override Task OnAfterRenderAsync(bool firstRender)
        {
            Console.WriteLine($"OnAfterRenderAsync({firstRender}: {Action})");
            return base.OnAfterRenderAsync(firstRender);
        }

        protected override async Task OnParametersSetAsync()
        {
            switch (Action)
            {
                case "logout":
                    await ((CustomAuthenticationService)AuthenticationService).SignOutAsync();
                    break;
                case "login":
                    await ((CustomAuthenticationService)AuthenticationService).SignInAsync("Batman", "sponge");
                    break;
                default:
                    break;
            }            
        }
}
